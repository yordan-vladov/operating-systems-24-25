
# Работа с данни - Част 2

---
# tr
---
## Какво е tr?

- транслитерация на символи
- трансформираме символи от една азбука към друга
---
```bash
echo "echo lowercase letters" | tr a-z A-Z # замества малки букви с големи букви
echo "echo lowercase letters" | tr -d a-z # трие всички малки букви
```
---
# sed

---
## Какво е sed?

- *stream editor*
- редактира файлове/стандартният вход
- мощен и сложен инструмент
---
##  Заместване

- Всяка sed команда започва с буква
- Ако буквата е "s", тогава командата ще замести една дума от входа с друга
---
```bash
echo "front" | sed 's/front/back/'
```
---
## Адреси

- Можем да ги добавим преди типът на командата, за да определим кои редове да бъдат засегнати

```bash
echo "front" | sed '1s/front/back/'
echo "front" | sed '2s/front/back/'
```
---

| Адрес            | Описание                             |
| ---------------- | ------------------------------------ |
| *n*              | *n*-тият ред                         |
| *$*              | последният ред                       |
| */regex/*        | редове, които се хващат от */regex/* |
| *addr1*, *addr2* | редове от *addr1* до *addr2* включ.  |

---

| Адрес        | Описание                                                                              |
| ------------ | ------------------------------------------------------------------------------------- |
| *first~step* | реда, представен от числото *first*, след това всеки следващ ред на интервали *step*. |
| *addr1,+n*   | *addr1* и следващите *n* реда                                                         |
| *addr!*      | всички редове освен *addr*                                                            |

---
## Команди

| Команда | Описание                        |
| ------- | ------------------------------- |
| *=*     | Изведи текущият ред             |
| *a*     | Добави текст след текущият ред  |
| *d*     | Изтрий текущият ред             |
| *i*     | Добави текст преди текущият ред |
| *p*     | Принтира текущият ред           |

---

| Команда                | Описание                                 |
| ---------------------- | ---------------------------------------- |
| *q*                    | Излез от sed                             |
| *s/regexp/replacement* | Замести срещания на regexp с replacement |
| *y/set1/set2*          | Изпълни транслитерация                   |

---
## sed - Флагове

- Когато изпълним `sed 's/regex/repl/` заместваме първото срещане на `regex` на всеки ред с `repl`
- В края на командата може да добавим допълнителни флагове, които ще модифицират командата

---

| Флаг        | Описание                                   |
| ----------- | ------------------------------------------ |
| *g*         | Замества всички срещания на реда           |
| *n* (число) | Замества n-тото срещане на реда            |
| *i*         | Не прави разлика между голям и малък шрифт |

---
## sed - Хващане

- При заместването можем да "хванем" част от шаблона като обвием в кръгли скоби и да го използваме при заместването  чрез '\1' (първото срещане на хваната част), '\2', т.н
---
## Задание

- Имаме списък от имена:
	```txt
	John Michael Smith
	Sarah Elizabeth Johnson
	James Robert Brown
	Emily Marie Davis
	William Edward Wilson
	```
-  Искаме да превърнем имената в потребителски имена (John Michael Smith => John_Smith)
