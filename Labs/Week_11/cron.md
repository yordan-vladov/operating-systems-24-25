# Cron задачи

## Какво e cron задача?

**Cron задача** е насрочена задача в Unix-базираните системите като Линукс. Те използват времеви организатор на задачи, наречен `cron`, чиято функция е автоматично да изпълнява скриптове, команди и програми през специфични времена и интервали.

## Основи на cron

`cron` даемонът работи на фонов режим и проверява **crontab**-ът (**cron** таблица) за задачи, които трябва да изпълни.

Всеки потребител (включително `root`) имат собствен **crontab**.

Потребител може да редактира своят **crontab** чрез командата:

```bash
crontab -e
```

Текущите **cron** задачи могат да се проверят чрез:

```bash
crontab -l
```

За да се премахне **crontab**:

```bash
crontab -r
```

```bash
* * * * * команда
│ │ │ │ │
│ │ │ │ └─ Ден от седмицата (0 - 7) (Неделя=0 или 7, Събота=6)
│ │ │ └─── Месец (1 - 12)
│ │ └───── Ден от месецът (1 - 31)
│ └─────── Час (0 - 23)
└───────── Минута (0 - 59)
```

Примери за времеви интервали:

| График                                | Cron Синтаксис |
| ------------------------------------- | -------------- |
| Всяка минута                          | `* * * * *`    |
| Всеки ден в полунощ                   | `0 0 * * *`    |
| Всяка Неделя в 17:00                  | `0 17 * * 0`   |
| Всеки 15 минути                       | `/15 * * * *`  |
| Първо число на всеки месец през 01:00 | `0 1 1 * *`    |
| Всеки делничен ден в 9:00             | `0 9 * * 1-5`  |

## Примерен cron job

Имаме примерен скрипт `backup.sh` в нашата домашна директория и искаме да я изпълняваме в 02:30 всеки ден.

Отваряме нашият **crontab**:

```bash
crontab -e
```

Добавяне на работата:

```bash
30 2 * * * ~/backup.sh
```

Уверяваме се, че скриптът е изпълним:

```bash
chmod +x ~/backup.sh
```

## Логване

- Cron обикновено не изпраща изход към терминала. По-добра идея да изпраща изход към log файлове.

```bash
30 2 * * * ~/backup.sh >> ~/backup.log 2>&1
```

Това изпраща стандартният изход и грешка към `backup.log`

## Задачи

### 1. Създаване на проста cron задача

Настройте cron задача, която да изписва съобщението "Добро утро, ученици!" в терминала всеки ден в 8:00 сутринта.речен cron, чиято функция е автоматично да изпълнява скриптове, команди и програми през специфични времена и интервали.

### 2. Автоматично архивиране на документи

Създайте директория `~/Documents`, ако нямате такава, и добавете в нея някакво съдържание, ако е празна. Настройте cron задача, която да архивира вашите документи (файлове в директорията /home/вашият_потребител/Documents) всеки ден в 9:00 часа.

### 3. Стартиране на задача в конкретни дни

Настройте cron задача, която да прави копие на вашия работен плот (директорията /home/вашият_потребител/Desktop) на 1-во и 15-о число на всеки месец в 12:00 часа.

## 4. Автоматично изчистване на кошчето

Настройте cron задача, която да изчиства кошчето на работния плот всяка събота в 4:00 часа сутринта.

## 5. Автоматично почистване на кеш файлове

Настройте cron задача, която да изтрива всички кеш файлове от директорията /home/вашият_потребител/.cache всеки ден в 2:00 часа през нощта.
