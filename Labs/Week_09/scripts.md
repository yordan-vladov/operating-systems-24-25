# Shell Скриптове

- В това упражнение ще учим как можем да създаваме и да работим със **shell** скриптове.

## Shell

- **Shell** е команден интерпретатор в Linux, който позволява на потребителите да взаимодействат с операционната система чрез въвеждане на команди. Shell може да работи в интерактивен режим (въведените команди се изпълняват веднага) или в скриптов режим (изпълнение на множество команди от файл).

## Видове шелове

- Съществуват различни видове Shell, като най-популярните са:
    - **Bash (Bourne Again Shell)** – най-разпространеният shell в Linux дистрибуциите.
    - **Sh (Bourne Shell)** – оригиналният Unix shell.
    - **Zsh (Z Shell)** – усъвършенствана версия на Bash с допълнителни функции.
    - **Ksh (Korn Shell)** – съчетава функционалности на Bash и C Shell.
    - **Fish (Friendly Interactive Shell)** – предлага лесен за използване интерфейс и автоматични предложения.

## Shell скрипт

- Shell скрипт е файл, който съдържа поредица от команди, които се изпълняват от шела ред по ред. Ето примерен скрипт **script.sh**:
```bash
#! /bin/bash
echo "Hello, $USER!"
```

- За да стартираме скрипта, трябва да го направим изпълним:
```bash
chmod +x script.sh
```

- След това за да го изпълним:
```bash
./script.sh
```

## Shebang

- На първият ред на всеки **shell** скрипт ние трябва да напишем един **shebang**. Чрез него ние поясняваме кой интерпретатор (най-често един от шеловете) ще изпълни този скрипт.
- Например `#!/bin/bash` пояснява че скриптът трябва да се изпълни от `bash` шелът.

## Променливи

- В shell скриптовете ние можем да пазим променливи:
```bash
foo="Operating Systems"
echo "I love $foo."
```

- Променливите могат да пазят и резултати от команди:
```bash
name=$(cat name.txt)
echo "My name is $name."
```

- Освен това в shell скриптовете ние имаме достъп **environment** променливите:
```bash
echo "My name is $USER."
echo "I am in $PWD."
echo "I'm using $SHELL."
```

## Аритметика

- В shell скриптовете можем да правим аритметични операции:

```bash
#!/bin/bash

echo $((1 + 3)) # 4
```
## Проверки

- В shell скриптовете можем да правим прости **if** проверки:
```bash
if [ condition ]; then
# Commands to run if condition is true
fi
```

- **if-else** проверки:
```bash
if [ condition ]; then
    # Commands if condition is true
else
    # Commands if condition is false
fi
```

- **if-elif-else** проверки:
```bash
if [ condition1 ]; then
    # Commands for condition1
elif [ condition2 ]; then
    # Commands for condition2
else
    # Commands if none are true
fi
```

### Аритметични оператори за сравнение

- При сравняване на числа можем да използваме следните оператори:

| Оператор | Значение            |
| -------- | ------------------- |
| `-eq`    | Равно               |
| `-ne`    | Неравно             |
| `-gt`    | По-голямо           |
| `-lt`    | По-малко            |
| `-ge`    | По-голямо или равно |
| `-le`    | По-малко или равно  |

- Например:
```bash
#!/bin/bash

num=10
if [ "$num" -gt 10 ]; then
    echo "Greater than 10"
elif [ "$num" -eq 10 ]; then
    echo "Equal to 10"
else
    echo "Less than 10"
fi
```

- Алтернативно при сравняване на числа можем да използваме "(())", в които да използваме традиционни оператори за сравнение като "<, >, >=, ...".
- Например:
```bash
a=-5
if ((a < 0)); then
	echo "$a is negative."
elif ((a > 0)); then
	echo "$a is positive."
else
	echo "$a is zero."
fi
```

### Текстови оператори за сравнение

- При сравняване на текстови низове можем да използваме следните оператори:

| Оператор | Значение     |
| -------- | ------------ |
| `=`      | Равно        |
| `!=`     | Неравно      |
| `<`      | По-малко     |
| `>`      | По-голямо    |
| `-z`     | Празен       |
| `-n`     | Непразен низ |

- Например когато проверяваме дали два низа са равни:
```bash
#!/bin/bash
str1="hello"
str2="world"

if [ "$str1" = "$str2" ]; then
    echo "Strings are equal"
else
    echo "Strings are different"
fi
```

- Или когато проверяваме дали текстов низ е празен:
```bash
#!/bin/bash
str1="hello"

if [ -z "$str1" ]; then
    echo "String is empty"
else
    echo "String is not empty"
fi
```

- Или проверяме дали един текстов низ е по-голям/малък лексикографски (изисква двойни скоби):
```bash
if [[ "$str1" < "$str2" ]]; then
    echo "$str1 comes before $str2 in sorting"
fi
```

### Логически оператори

- Когато искаме да комбинираме няколко условия:

| Оператор    | Значение      |
| ----------- | ------------- |
| `&&` , `-a` | Логическо И   |
| \|\|, `-o`  | Логическо ИЛИ |
| `!`         | Логическо НЕ  |

- Например:
```bash
if [ "$num" -gt 5 ] && [ "$num" -lt 20 ]; then
    echo "Number is between 5 and 20"
fi
```

## Задачи

### 1. Hello World

- Напишете shell скрипт, който извежда "Hello, World!" на екрана.
### 2. Извеждане на име

- Напишете shell скрипт, който създава променлива `name` със стойност вашето име и я извежда на екрана.
### 3. Извеждане на променлива средата

- Напишете shell скрипт, който приветства потребителя, логнат в системата.
### 4. Аритметични операции

- Напишете shell скрипт, който приема две числа като вход и извежда тяхната сума. Числата да са зададени статично като променливи в скрипта.
### 5. Условни проверки (if-else)

- Напишете shell скрипт, който проверява дали дадено число е положително, отрицателно или нула.
### 6. Условни проверки (Част 2)

-  Напишете shell скрипт, който проверява дали дадено число е между 0 и 100, по-малко от 0 или по-голямо от 100.
### 7. Проверка за четност на число

- Създайте скрипт, който проверява дали подадено число е четно или нечетно.

### 8. Архивиране на файлове

- Напишете скрипт, който архивира всички файлове от дадена директория в .tar.gz архив. Директорията да е зададена статично като променлива.

### 9. Автоматично архивиране на лог файлове

- Създайте папка за архиви `logs_backup` . Напишете скрипт, който търси всички .log файлове в текущата директория и ги премества в `logs_backup`.

### 10. Мониторинг на системни ресурси

- Напишете скрипт, който извежда информация за натоварването на CPU, паметта и дисковото пространство. Използвайте команди като `top`, `free` и `df`.

### 11. Предаване

- Качете екранни снимки на различните скриптове, както и на тяхното изпълнението им в конзолата.
- Накрая изтрийте shell скриптовете.
